# -*- conf -*-
#
# Editable runtime dependencies (equivalent to install_requires)
# Add direct runtime dependencies here, as well as implicit dependencies
# with constrained versions.
#
# After editing, update requirements/main.txt by running:
#     make update-deps

# These dependencies are for fastapi including some optional features.
fastapi
starlette
uvicorn[standard]

# Other dependencies.
google-cloud-storage
httpx
jinja2
pyyaml
safir[gcs]
structlog

# The non-alpha tagged releases of lsst-daf-butler and lsst-resources are
# ancient since the project almost never makes releases, so we have to pin
# them to alpha versions.  This means the pip install command used by tox
# and the Makefile needs to include --pre.
#
# Unfortunately, currently these pins appear to have to be moved to the latest
# alpha release as soon as it comes out or the package becomes uninstallable,
# since installing with --pre appears to try to use the latest alpha release
# even if the version for that package is already pinned to something else.
lsst-daf-butler[postgres]==26.0.0a20230500
lsst-resources[s3,gs]==26.0.0a20230500

# Recursive dependency of lsst-daf-butler, which also needs to be pinned
# to an alpha release or lsst-daf-butler will try to use the latest tagged
# release and fail due to missing modules.
lsst-daf-relation==1.0.0a20230500
lsst-sphgeom==26.0.0a20230500
lsst-utils==26.0.0a20230500

# Uncomment this, change the branch, comment out safir above, and run make
# update-deps-no-hashes to test against an unreleased version of Safir.
#git+https://github.com/lsst-sqre/safir@main#egg=safir[gcs]
